<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manajemen Barang</title>
    <script src="https://cdn.tailwindcss.org"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="bg-gray-100 p-5">

    <div class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow">
        <h1 class="text-2xl font-bold mb-4">Daftar Barang</h1>
        
        <div class="flex flex-wrap gap-4 mb-6">
            <input type="text" id="searchInput" placeholder="Cari nama barang..." class="border p-2 rounded w-full md:w-64">
            <input type="date" id="filterTanggal" class="border p-2 rounded">
            <select id="filterStatus" class="border p-2 rounded">
                <option value="">Semua Status</option>
                <option value="diverifikasi">Diverifikasi</option>
                <option value="menunggu">Menunggu</option>
            </select>
            <button id="kolaseBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Buat Kolase</button>
        </div>

        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="p-3">No</th>
                        <th class="p-3">Foto</th>
                        <th class="p-3">Nama Barang</th>
                        <th class="p-3">Kebutuhan</th>
                        <th class="p-3">Datang</th>
                        <th class="p-3">Satuan</th>
                        <th class="p-3">Verif User</th>
                        <th class="p-3">Verif Admin</th>
                        <th class="p-3">Tipe</th>
                        <th class="p-3">Aksi</th>
                    </tr>
                </thead>
                <tbody id="barangTable"></tbody>
            </table>
        </div>

        <div id="pagination" class="flex justify-center gap-2 mt-4"></div>
    </div>

    <div id="kolaseModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40 p-4">
        <div class="bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Pilih 4 Barang untuk Kolase</h2>
                <button id="closeKolase" class="text-red-600 font-bold">Tutup [X]</button>
            </div>
            
            <div class="flex gap-4 mb-4">
                <input type="date" id="kolaseFilterTanggal" class="border p-2 rounded">
                <input type="text" id="kolaseFileName" placeholder="Nama file (contoh: laporan-januari)" class="border p-2 rounded flex-1">
            </div>

            <div id="kolaseList" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"></div>

            <div class="flex flex-col items-center border-t pt-6">
                <button id="buatKolaseBtn" class="bg-green-600 text-white px-6 py-2 rounded mb-4">Generate Preview</button>
                <div id="kolasePreview" class="hidden shadow-2xl"></div>
                <button id="downloadKolaseBtn" class="bg-blue-700 text-white px-6 py-2 rounded mt-4 hidden">Download Gambar (.png)</button>
            </div>
        </div>
    </div>

    <div id="fotoSelectModal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg text-center">
            <h3 class="font-bold mb-4">Pilih Foto Utama</h3>
            <div id="fotoSelectOptions" class="flex gap-4 justify-center mb-6"></div>
            <div class="flex gap-2 justify-center">
                <button id="fotoSelectCancel" class="bg-gray-300 px-4 py-2 rounded">Batal</button>
                <button id="fotoSelectOk" class="bg-blue-600 text-white px-4 py-2 rounded">Pilih</button>
            </div>
        </div>
    </div>

    <script type="module" src="./barang.js"></script>
</body>
</html>
